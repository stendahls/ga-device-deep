<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <title>Stendahls GA device deep custom dimensions</title>
    <style>
      body {
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    
    <div style="margin: 20px 0;">
    
      <h3>GA device deep script example.</h3>
      
      <p>More precise device detection for Google analytics</p>
      
      <a href="https://github.com/stendahls/ga-device-deep">View on gitHub</a>
      
      <hr>
      
      <div id="output" style="font-size: 36px; font-size: 8vw;"></div>
      
      <hr>
      
      <p id="ua"></p>
    
    </div>

    <script src="ga-device-deep.js" lang="javascript"></script>
    <script>
      var dimensionMap = {'device':'dimension1','orientation':'dimension2','dppx':'dimension3','forceTouch':'dimension4','wideGamut':'dimension5','pointerEvents':'dimension6','touchEvents':'dimension7'};
      var object = gaDeviceDeep.find(dimensionMap);
      
      // from here on is only for this demo:
      function swap(json){
        var ret = {};
        for(var key in json){
          ret[json[key]] = key;
        }
        return ret;
      }
      var mapDimension = swap(dimensionMap);
      var html = '';
      if (object) {
        for (var key in object) {
          html += '<b>' + mapDimension[key] + ':</b><br> ' + object[key] + '<br>' ;
        }
      } else {
        html = 'unknown device <div style="font-size:1rem;">may be skipped by the once-per-session cookie. <a href="?debug">Add "?debug" to the URL</a> to bypass</div>';
      }
      document.getElementById('output').innerHTML = html;
      document.getElementById('ua').innerHTML = window.navigator.userAgent;
    </script>
  </body>
</html>